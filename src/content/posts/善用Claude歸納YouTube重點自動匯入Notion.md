---
title: å–„ç”¨Claudeæ­¸ç´YouTubeé‡é»è‡ªå‹•åŒ¯å…¥Notion
seoTitle: å–„ç”¨ Claude æ­¸ç´ YouTube é‡é»ä¸¦è‡ªå‹•åŒ¯å…¥ Notion
seoDescription: åªè¦è¼¸å…¥ YouTube ç¶²å€, Claude ä¸²æ¥æœ¬åœ° Whisper èªéŸ³è½‰æ–‡å­—ç”Ÿæˆå­—å¹•, è‡ªå‹•å°‡æ•´ç†å®Œçš„ç­†è¨˜æ–°å¢é€² Notion è£¡
datePublished: Sun Mar 30 2025 09:10:30 GMT+0000 (Coordinated Universal Time)
cuid: cm8vf6rgj000z09ld4ttq7ybx
slug: claude-desktop-notion-2
cover: https://cdn.hashnode.com/res/hashnode/image/upload/v1742564740437/d9be5e34-bd75-471b-bddb-438e23bc5a17.png
tags: ["notion", "whisper", "claude", "speechtotext", "mcp"]
date: "2025-03-23"
category: "ç”Ÿç”¢åŠ›ææ˜‡"
readTime: "6 min read"
excerpt: "åˆ†äº«æœ€æ–°çš„AIå·¥å…·ä½¿ç”¨å¿ƒå¾—"
---

åœ¨é€™å€‹AIæŠ€è¡“è¿…é€Ÿè¿­ä»£çš„æ™‚ä»£ï¼Œæˆ‘å€‘æ¯å¤©éƒ½åœ¨æ¶ˆåŒ–å¤§é‡çš„å½±ç‰‡å…§å®¹ä¾†å­¸ç¿’æ–°çŸ¥è­˜ã€‚

ä½†ä½ æ˜¯å¦æ›¾æœ‰é€™æ¨£çš„ç¶“é©—ï¼šèŠ±äº†å¤§é‡æ™‚é–“è§€çœ‹å„ç¨®æ•™å­¸å½±ç‰‡ï¼Œå»åœ¨ä¸€æ®µæ™‚é–“å¾Œç™¼ç¾è‡ªå·±ä¼¼ä¹æ²’æœ‰çœŸæ­£æˆé•·ï¼Ÿ

å•é¡Œå¯èƒ½å‡ºåœ¨æˆ‘å€‘ç¼ºå°‘äº†ã€Œåšç­†è¨˜ã€å’Œã€Œè¤‡ç›¤ã€é€™å…©å€‹é—œéµæ­¥é©Ÿã€‚

ç„¶è€Œï¼Œç¾å¯¦æ˜¯ï¼š

> ã€Œå·²ç¶“èŠ±é‚£éº¼å¤šæ™‚é–“çœ‹å½±ç‰‡äº†ï¼Œå“ªæœ‰é¡å¤–æ™‚é–“å†åšç­†è¨˜å•Šï¼Ÿã€ğŸ˜©

æœ€è¿‘æˆ‘ç™¼ç¾å¯ä»¥å–„ç”¨AIæŠ€è¡“ä¾†å¹«æˆ‘åšç­†è¨˜ï¼é€™æ¨£ä¸åƒ…ç¯€çœæ™‚é–“ï¼Œé‚„èƒ½æœ‰ç³»çµ±åœ°ç´¯ç©çŸ¥è­˜ï¼Œæ–¹ä¾¿æ—¥å¾Œè¤‡ç›¤å›é¡§ã€‚

æœ¬æ–‡å°‡ä»‹ç´¹ä¸€å€‹çµåˆ Whisper èªéŸ³è­˜åˆ¥æŠ€è¡“ã€Claude AI èˆ‡ Notion çš„è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ï¼Œè®“ä½ èƒ½å¤ ï¼š

1. è‡ªå‹•å°‡ YouTube å½±ç‰‡è½‰æ›ç‚ºæ–‡å­—ç¨¿
    
2. åˆ©ç”¨ AI æ•´ç†ä¸¦ç”Ÿæˆçµæ§‹åŒ–ç­†è¨˜
    
3. ç›´æ¥å°‡ç­†è¨˜å­˜å…¥ Notion çŸ¥è­˜åº«
    
4. éš¨æ™‚å›é¡§ä¸¦éå›ºæ‰€å­¸çŸ¥è­˜
    

é€™å€‹è‡ªå‹•åŒ–ç­†è¨˜ç³»çµ±ä¸åƒ…èƒ½ç¯€çœå¤§é‡æ™‚é–“ï¼Œé‚„èƒ½å¹«åŠ©ä½ å»ºç«‹ç³»çµ±æ€§çš„çŸ¥è­˜ç´¯ç©æ©Ÿåˆ¶ï¼Œè®“æ¯æ¬¡è§€çœ‹çš„å½±ç‰‡å…§å®¹éƒ½èƒ½è½‰åŒ–ç‚ºé•·æœŸè¨˜æ†¶ä¸­çš„å¯¶è²´è³‡ç”¢ã€‚

---

# ä½¿ç”¨ç¯„ä¾‹

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1743311998884/88b39022-ff8c-46aa-a8ba-49bcfce48994.png align="center")

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1743312022164/7fa24858-c89d-4762-93f1-b6017ecf19e2.png align="center")

## æ­¥é©Ÿ

1. è¤‡è£½ YouTube å½±ç‰‡ç¶²å€
    
2. åœ¨ Claude Desktop èŠå¤©ç•Œé¢è²¼ä¸Š YouTube å½±ç‰‡ç¶²å€
    
3. ç³»çµ±æœƒè‡ªå‹•ï¼š
    
    * ä¸‹è¼‰å½±ç‰‡éŸ³è¨Š
        
    * ä½¿ç”¨ Whisper è½‰æ›ç‚ºæ–‡å­—ç¨¿
        
    * é€é Claude æ•´ç†æˆçµæ§‹åŒ–ç­†è¨˜
        
    * å°‡ç­†è¨˜å„²å­˜è‡³ä½ çš„ Notion è³‡æ–™åº«
        

å¹¾åˆ†é˜å¾Œï¼Œä½ å°±èƒ½å¾—åˆ°ä¸€ä»½çµæ§‹æ¸…æ™°ã€æ®µè½åˆ†æ˜çš„ç­†è¨˜ï¼

## ç”¨æ³•æŠ€å·§

1. æˆ‘é€šå¸¸æœƒå…ˆè®“ Claude ç”¢ç”Ÿç­†è¨˜
    
2. åœ¨é–±è®€å½±ç‰‡çš„åŒæ™‚, ä¸€é‚Šä¿®æ”¹ç­†è¨˜
    
3. é–±è®€å®Œå½±ç‰‡å¾Œ, å†å°‡ç­†è¨˜è²¼åˆ° Notion ç­†è¨˜è£¡
    

---

# å·¥ä½œæµç¨‹åœ–

```mermaid
sequenceDiagram 
    participant User as ä½¿ç”¨è€…
    participant Claude as Claude Desktopï¼ˆMCPå®¢æˆ¶ç«¯ï¼‰
    participant Server as YouTubeå­—å¹•MCPä¼ºæœå™¨
    participant YTDLP as yt-dlp
    participant FFmpeg as FFmpeg
    participant Whisper as Whisperæ¨¡å‹
    participant Cache as å­—å¹•å¿«å–
    participant Notion as Notion API

    User->>Claude: æä¾›YouTubeå½±ç‰‡ç¶²å€
    Claude->>Server: å‘¼å«get_youtube_subtitleså·¥å…·
    
    alt å¿«å–ä¸­å­˜åœ¨å­—å¹•
        Server->>Cache: æª¢æŸ¥å½±ç‰‡IDçš„å¿«å–
        Cache-->>Server: è¿”å›å·²å¿«å–çš„å­—å¹•
    else å¿«å–ä¸­ä¸å­˜åœ¨
        Server->>YTDLP: ä¸‹è¼‰YouTubeå½±ç‰‡éŸ³è¨Š
        YTDLP->>FFmpeg: è½‰æ›ç‚ºWAVæ ¼å¼
        FFmpeg-->>Server: è¿”å›è™•ç†å¾Œçš„éŸ³è¨Šæª”æ¡ˆ
        Server->>Whisper: å‚³é€éŸ³è¨Šé€²è¡Œè½‰éŒ„
        Whisper-->>Server: è¿”å›æ–‡å­—ç¨¿
        Server->>Cache: å„²å­˜å­—å¹•åˆ°å¿«å–
    end
    
    Server-->>Claude: è¿”å›å½±ç‰‡æ–‡å­—ç¨¿
    Claude->>Claude: ä½¿ç”¨æ–‡å­—ç¨¿ç”Ÿæˆçµæ§‹åŒ–ç­†è¨˜
    Claude->>Notion: å‘¼å«Notion APIå»ºç«‹ç­†è¨˜
    Notion-->>Claude: è¿”å›ç­†è¨˜é€£çµ
    Claude-->>User: é¡¯ç¤ºç­†è¨˜é€£çµèˆ‡æ‘˜è¦
```

---

# å®‰è£èˆ‡è¨­å®šæ­¥é©Ÿ

## å‰ç½®éœ€æ±‚

åœ¨é–‹å§‹å»ºç«‹é€™å€‹è‡ªå‹•åŒ–ç­†è¨˜ç³»çµ±å‰ï¼Œä½ éœ€è¦æº–å‚™ä»¥ä¸‹é …ç›®ï¼š

1. **Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬**ï¼šç”¨æ–¼é‹è¡Œ MCP ä¼ºæœå™¨èˆ‡ Whisper
    
2. **å®‰è£è¨­å®šå¥½ Notion MCP Server:** å¯ä»¥åƒè€ƒæˆ‘ä¹‹å‰çš„æ–‡ç«  [è®“ Claude Desktop å¹«ä½ æ•´ç†ä½ çš„ Notion ç­†è¨˜](https://polly.hashnode.dev/claude-desktop-notion)
    

## å®‰è£

### **æ­¥é©Ÿ 1ï¼šå®‰è£ uv å·¥å…·**

#### Windows

```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

è«‹é‡æ–°å•Ÿå‹•çµ‚ç«¯æ©Ÿä»¥ç¢ºä¿ uv å‘½ä»¤å¯è¢«è­˜åˆ¥ã€‚

### **æ­¥é©Ÿ 2ï¼šå®‰è£ ffmpegå·¥å…·**

#### Windows

```powershell
choco install ffmpeg
```

å¦‚æœæ²’æœ‰choco, å»ºè­°ä½¿ç”¨ chocolatey

#### Windows

```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
```

## **å»ºç«‹å°ˆæ¡ˆçµæ§‹**

#### Windows

```powershell
# å»ºç«‹æ–°å°ˆæ¡ˆç›®éŒ„
uv init youtube_to_text
cd youtube_to_text

# å»ºç«‹è™›æ“¬ç’°å¢ƒä¸¦å•Ÿç”¨
uv venv
.venv\Scripts\activate

# å®‰è£ä¾è³´å¥—ä»¶
uv add mcp[cli] openai-whisper yt-dlp
# æˆ‘é€™è£¡é‡åˆ°ä¾è³´å•é¡Œ, è§£æ³•æ˜¯æ¸…ç©º pyproject.toml çš„ dependencies å¾Œ, å†å®‰è£ PyTorch
uv add markupsafe==2.1.5 torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# å»ºç«‹ä¼ºæœå™¨æª”æ¡ˆ
new-item youtube_to_text.py
```

## å»ºç«‹ MCP ä¼ºæœå™¨ä¸»ç¨‹å¼

åœ¨ youtube\_to\_text.py æª”æ¡ˆï¼Œå¯¦ä½œæˆ‘å€‘çš„è‡ªå‹•åŒ–ç­†è¨˜ç³»çµ±ï¼š

```python
import os
import re
import json
import whisper
import tempfile
import subprocess
import torch
import logging
import time
from typing import List, Optional, Dict, Any
from mcp.server.fastmcp import FastMCP

# è¨­å®šæ—¥èªŒé…ç½®
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)
logger = logging.getLogger("youtube_to_text")

# åˆå§‹åŒ– FastMCP ä¼ºæœå™¨
mcp = FastMCP("youtube_to_text")

# è¨­å®šåŸºæœ¬åƒæ•¸
WHISPER_MODEL_SIZE = "tiny"  # å¯é¸æ“‡: tiny, base, small, medium, large
DEVICE = "cuda" if torch.cuda.is_available() else "cpu"

# æ“·å– YouTube å½±ç‰‡ ID çš„å‡½æ•¸
def extract_youtube_id(url: str) -> Optional[str]:
    """å¾ YouTube URL ä¸­æ“·å–å½±ç‰‡ ID"""
    patterns = [
        r"youtube\.com/watch\?v=([^&\s]+)",  # æ¨™æº– YouTube URL
        r"youtu\.be/([^\?\s]+)",             # ç¸®çŸ­çš„ YouTube URL
        r"youtube\.com/embed/([^\?\s]+)",    # åµŒå…¥å¼ YouTube URL
        r"youtube\.com/v/([^\?\s]+)",        # èˆŠæ ¼å¼ YouTube URL
        r"^([a-zA-Z0-9_-]{11})$"             # ç›´æ¥è¼¸å…¥ YouTube ID
    ]

    for pattern in patterns:
        match = re.search(pattern, url)
        if match:
            return match.group(1)
    return None

# æ ¼å¼åŒ–æ™‚é–“æˆ³è¨˜
def format_timestamp(seconds: float) -> str:
    """å°‡ç§’æ•¸æ ¼å¼åŒ–ç‚º [MM:SS] æ ¼å¼"""
    minutes = int(seconds // 60)
    remaining_seconds = int(seconds % 60)
    return f"[{minutes:02d}:{remaining_seconds:02d}]"

# ä½¿ç”¨ yt-dlp ä¸‹è¼‰ YouTube éŸ³è¨Š
def download_youtube_audio(url: str, output_path: str, timeout: int = 300) -> bool:
    """ä½¿ç”¨ yt-dlp ä¸‹è¼‰ YouTube å½±ç‰‡çš„éŸ³è¨Š"""
    try:
        ytdlp_cmd = [
            "yt-dlp", 
            "--extract-audio", 
            "--audio-format", "wav",
            "--audio-quality", "0",
            "--output", output_path,
            url
        ]
        logger.info("åŸ·è¡Œ yt-dlp å‘½ä»¤ä¸‹è¼‰éŸ³è¨Š")
        
        process = subprocess.run(ytdlp_cmd, check=True, timeout=timeout,
                               stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        
        if os.path.exists(output_path):
            logger.info("éŸ³è¨Šä¸‹è¼‰æˆåŠŸ")
            return True
        else:
            logger.warning("ä¸‹è¼‰ä¼¼ä¹æˆåŠŸï¼Œä½†æ‰¾ä¸åˆ°è¼¸å‡ºæª”æ¡ˆ")
            return False
    except Exception as e:
        logger.error(f"ä¸‹è¼‰éŸ³è¨Šæ™‚å‡ºéŒ¯: {str(e)}")
        return False

# ä½¿ç”¨ Whisper è™•ç†éŸ³è¨Š
def process_audio_with_whisper(audio_file: str, language: str = "zh-TW") -> Optional[Dict[str, Any]]:
    """ä½¿ç”¨ Whisper æ¨¡å‹è™•ç†éŸ³è¨Šæª”æ¡ˆä¸¦ç”Ÿæˆå­—å¹•"""
    try:
        # è¼‰å…¥ Whisper æ¨¡å‹
        logger.info(f"æ­£åœ¨è¼‰å…¥ Whisper {WHISPER_MODEL_SIZE} æ¨¡å‹")
        model = whisper.load_model(WHISPER_MODEL_SIZE, device=DEVICE)
        
        # è¨­å®šè½‰éŒ„é¸é …
        task_type = "translate" if language.startswith("en") else "transcribe"
        transcribe_options = {
            "language": language[:2] if language else None,
            "task": task_type,
        }
        
        # é–‹å§‹è¨ˆæ™‚
        start_time = time.time()
        
        # è½‰éŒ„éŸ³è¨Š
        logger.info(f"é–‹å§‹è½‰éŒ„éŸ³è¨Š (èªè¨€: {language[:2]}, ä»»å‹™: {task_type})")
        result = model.transcribe(audio_file, **transcribe_options)
        
        # çµæŸè¨ˆæ™‚
        end_time = time.time()
        transcribe_time = end_time - start_time
        
        # æ ¼å¼åŒ–å­—å¹•çµæœ
        formatted_text = f"ã€å­—å¹•ä¾†æº: Whisper {WHISPER_MODEL_SIZE} æ¨¡å‹ (èªè¨€: {language})ã€‘\n"
        formatted_text += f"ã€é‹è¡Œè¨­å‚™: {DEVICE}ã€‘\n"
        formatted_text += f"ã€è½‰éŒ„ç”¨æ™‚: {transcribe_time:.2f} ç§’ã€‘\n\n"
        
        for segment in result["segments"]:
            timestamp = format_timestamp(segment["start"])
            formatted_text += f"{timestamp} {segment['text'].strip()}\n"
        
        logger.info(f"éŸ³è¨Šè½‰éŒ„å®Œæˆï¼Œç”¨æ™‚: {transcribe_time:.2f} ç§’")
        
        return {
            "text": formatted_text,
            "transcribe_time": transcribe_time,
            "device": DEVICE
        }
    
    except Exception as e:
        logger.error(f"ä½¿ç”¨ Whisper è™•ç†éŸ³è¨Šæ™‚å‡ºéŒ¯: {str(e)}")
        return None

# ä½¿ç”¨ FastMCP è£é£¾å™¨ä¾†å®šç¾© API ç«¯é»
@mcp.tool()
async def get_youtube_subtitles(
    url: str,
    language: str = "zh-TW",
    cache_enabled: bool = True
) -> List[Dict[str, Any]]:
    """æ“·å– YouTube å½±ç‰‡çš„å­—å¹•ï¼Œä½¿ç”¨ yt-dlp + Whisper
    
    Args:
        url: YouTube å½±ç‰‡çš„ç¶²å€
        language: å­—å¹•èªè¨€ä»£ç¢¼ï¼Œé è¨­ç‚º 'zh-TW'ï¼ˆç¹é«”ä¸­æ–‡ï¼‰
        cache_enabled: æ˜¯å¦å•Ÿç”¨å­—å¹•å¿«å–
    
    Returns:
        åŒ…å«è™•ç†çµæœå’Œå­—å¹•å…§å®¹çš„åˆ—è¡¨
    """
    # æ“·å– YouTube å½±ç‰‡ ID
    video_id = extract_youtube_id(url)
    if not video_id:
        error_msg = "ç„¡æ³•å¾æä¾›çš„ URL æ“·å– YouTube å½±ç‰‡ ID"
        logger.error(error_msg)
        return [{"status": "error", "message": error_msg}]
    
    logger.info(f"è™•ç† YouTube å½±ç‰‡ ID: {video_id}")
    
    # æª¢æŸ¥å¿«å–
    if cache_enabled:
        cache_dir = "subtitles_cache"
        os.makedirs(cache_dir, exist_ok=True)
        cache_file = os.path.join(cache_dir, f"{video_id}_{language}.json")
        
        if os.path.exists(cache_file):
            try:
                with open(cache_file, 'r', encoding='utf-8') as f:
                    cached_data = json.load(f)
                logger.info(f"å¾å¿«å–ç²å–å­—å¹•")
                return [
                    {"status": "success", "message": f"å·²å¾å¿«å–ç²å–å­—å¹• (å½±ç‰‡ ID: {video_id})", "source": "cache"},
                    f"ã€å­—å¹•ä¾†æº: å¿«å–ã€‘\nã€é‹è¡Œè¨­å‚™: {DEVICE}ã€‘\n\n{cached_data['subtitles']}"
                ]
            except Exception as e:
                logger.warning(f"è®€å–å¿«å–å¤±æ•—: {str(e)}")
    
    # ä½¿ç”¨ yt-dlp + Whisper è™•ç†
    try:
        with tempfile.TemporaryDirectory() as temp_dir:
            # è¨­å®šéŸ³è¨Šæª”æ¡ˆè·¯å¾‘
            audio_path = os.path.join(temp_dir, f"{video_id}.wav")
            
            # ä¸‹è¼‰éŸ³è¨Š
            download_start_time = time.time()
            download_success = download_youtube_audio(f"https://www.youtube.com/watch?v={video_id}", audio_path)
            download_time = time.time() - download_start_time
            
            if not download_success:
                return [{"status": "error", "message": "ä¸‹è¼‰éŸ³è¨Šå¤±æ•—"}]
            
            # ç¢ºèªéŸ³è¨Šæª”æ¡ˆæ˜¯å¦å­˜åœ¨
            if not os.path.exists(audio_path):
                return [{"status": "error", "message": "æ‰¾ä¸åˆ°ä¸‹è¼‰çš„éŸ³è¨Šæª”æ¡ˆ"}]
            
            # ä½¿ç”¨ Whisper è™•ç†éŸ³è¨Š
            result = process_audio_with_whisper(audio_path, language)
            
            if not result:
                return [{"status": "error", "message": "ä½¿ç”¨ Whisper è™•ç†éŸ³è¨Šæ™‚å‡ºéŒ¯"}]
            
            # ç²å–è™•ç†çµæœ
            whisper_subtitles = result["text"]
            transcribe_time = result.get("transcribe_time", 0)
            
            # å„²å­˜åˆ°å¿«å–
            if cache_enabled:
                try:
                    with open(cache_file, 'w', encoding='utf-8') as f:
                        json.dump({"subtitles": whisper_subtitles}, f, ensure_ascii=False, indent=2)
                    logger.info("å­—å¹•å·²å„²å­˜åˆ°å¿«å–")
                except Exception as e:
                    logger.warning(f"å„²å­˜å¿«å–å¤±æ•—: {str(e)}")
            
            # å›å‚³çµæœ
            return [
                {
                    "status": "success", 
                    "message": f"å·²æˆåŠŸä½¿ç”¨ Whisper æ“·å–å­—å¹• (å½±ç‰‡ ID: {video_id})", 
                    "source": "whisper",
                    "download_time": download_time,
                    "transcribe_time": transcribe_time,
                    "device": DEVICE
                },
                whisper_subtitles
            ]
    
    except Exception as e:
        logger.error(f"è™•ç†éŒ¯èª¤: {str(e)}")
        return [{"status": "error", "message": f"è™•ç†éŒ¯èª¤: {str(e)}"}]

# ä¸»ç¨‹å¼å…¥å£é»
if __name__ == "__main__":
    logger.info(f"YouTube å­—å¹•æå–æœå‹™å•Ÿå‹•ä¸­ï¼Œé‹è¡Œè¨­å‚™: {DEVICE}")
    logger.info(f"ä½¿ç”¨ FastMCP ä¼ºæœå™¨å•Ÿå‹• API æœå‹™...")
    # ä½¿ç”¨æ¨™æº–è¼¸å…¥/è¼¸å‡ºä½œç‚ºé€šè¨Šé€šé“
    mcp.run(transport="stdio")
```

é‹è¡Œ uv run youtube\_to\_text.py ä»¥ç¢ºèªä¸€åˆ‡æ­£å¸¸é‹ä½œã€‚

## è¨­å®š Claude Desktop é…ç½®

#### **Windows**

è¨­å®šæª”é€šå¸¸ä½æ–¼ä»¥ä¸‹è·¯å¾‘ï¼š

```powershell
C:\Users\[ä½¿ç”¨è€…åç¨±]\AppData\Roaming\Claude\claude_desktop_config.json
```

```json
{
    "mcpServers": {
        "youtube_to_text": {
            "command": "uv",
            "args": [
                "--directory",
                "C:\\[å°ˆæ¡ˆè·¯å¾‘]\\youtube_to_text",
                "run",
                "youtube_to_text.py"
            ]
        }
    }
}
```

é‡æ–°å•Ÿå‹• Claude Desktopï¼Œå³å¯åœ¨èŠå¤©ç•Œé¢ä¸­ä½¿ç”¨æˆ‘å€‘çš„è‡ªå‹•åŒ–ç­†è¨˜åŠŸèƒ½ï¼

### **è¨­å®šæˆåŠŸæœƒå‡ºç¾ä»¥ä¸‹å…§å®¹**

![](https://cdn.hashnode.com/res/hashnode/image/upload/v1743311775414/afd270b4-d5b0-4eaa-af10-81cc5e033dd8.png align="center")

---

# æ•…éšœæ’é™¤

## ç”¢ç”Ÿå­—å¹•é€¾æ™‚

1. åœ¨ä½¿ç”¨ youtube\_to\_text MCP Server çš„éç¨‹ä¸­, æœ‰é‡åˆ°æŸäº›é•·æ™‚é–“çš„å½±ç‰‡, æœƒæœ‰èªéŸ³è½‰æ–‡å­—è¶…é4åˆ†é˜, Claude Desktop æœƒè¿”å›é€¾æ™‚éŒ¯èª¤, é€™å€‹è¦å†å°‹æ‰¾æ˜¯å¦æœ‰å¯ä»¥å¢åŠ é€¾æ™‚è¨­å®šçš„æ–¹æ³•
    
2. ç›®å‰æˆ‘å°±æ˜¯å†åŸ·è¡Œä¸€æ¬¡, å› ç‚ºç¬¬ä¸€æ¬¡çš„åŸ·è¡Œå·²ç¶“ç”¢ç”Ÿå­—å¹•, ç¬¬äºŒæ¬¡åŸ·è¡Œ, æœƒç›´æ¥ä½¿ç”¨å¿«å–, è€Œä¸ç”¨å†è½‰ä¸€æ¬¡å­—å¹•
    

---

# å¤šäº†è§£ä¸€é»

## yt-dlp

yt-dlp æ˜¯ä¸€å€‹åŠŸèƒ½å¼·å¤§çš„å‘½ä»¤åˆ—ç¨‹å¼ï¼Œå°ˆé–€ç”¨æ–¼å¾äº’è¯ç¶²ä¸Šä¸‹è¼‰å½±ç‰‡ï¼Œç‰¹åˆ¥æ˜¯å¾ YouTube ç¶²ç«™ã€‚å®ƒæ˜¯åŸºæ–¼è‘—åçš„ youtube-dl çš„ä¸€å€‹åˆ†æ”¯ï¼Œä½†åŠ å…¥äº†è¨±å¤šåŠŸèƒ½æ”¹é€²å’Œæ•ˆèƒ½å„ªåŒ–ã€‚

### åœ¨é€™è£¡çš„ç”¨é€”

yt-dlp è² è²¬é«˜æ•ˆç‡åœ°æ“·å– YouTube å½±ç‰‡çš„éŸ³è¨Šï¼Œä¸¦å°‡å…¶å„²å­˜ç‚º wav æ ¼å¼ï¼Œä»¥ä¾¿å¾ŒçºŒç”± Whisper æ¨¡å‹é€²è¡Œè™•ç†ã€‚

ä»¥ä¸‹æ˜¯åœ¨æˆ‘å€‘çš„ç¨‹å¼ä¸­ä½¿ç”¨ yt-dlp çš„åŸºæœ¬æµç¨‹ï¼š

1. å¾ YouTube URL æ“·å–å½±ç‰‡ ID
    
2. ä½¿ç”¨ yt-dlp ä¸‹è¼‰å½±ç‰‡çš„éŸ³è¨Šéƒ¨åˆ†ï¼ˆç„¡éœ€ä¸‹è¼‰è¦–è¨Šéƒ¨åˆ†ï¼Œç¯€çœé »å¯¬å’Œæ™‚é–“ï¼‰
    
3. å°‡éŸ³è¨Šè½‰æ›ç‚º Whisper å¯è™•ç†çš„æ ¼å¼
    
4. å°‡éŸ³è¨Šå‚³çµ¦ Whisper æ¨¡å‹é€²è¡Œè½‰éŒ„
    

## FFmpeg èˆ‡ yt-dlp çš„é—œä¿‚

FFmpeg æ˜¯ä¸€å€‹è™•ç†å¤šåª’é«”å…§å®¹çš„å¼·å¤§é–‹æºå·¥å…·é›†ï¼Œèƒ½å¤ è™•ç†å¹¾ä¹æ‰€æœ‰é¡å‹çš„éŸ³è¨Šå’Œè¦–è¨Šã€‚åœ¨æˆ‘å€‘çš„ YouTube å­—å¹•æ“·å–å·¥å…·ä¸­ï¼ŒFFmpeg èˆ‡ yt-dlp é…åˆä½¿ç”¨ï¼Œæ‰®æ¼”è‘—é—œéµè§’è‰²ã€‚

### åœ¨é€™è£¡çš„ç”¨é€”

åœ¨ YouTube å­—å¹•æ“·å–å·¥å…·ä¸­ï¼ŒFFmpeg çš„æ‡‰ç”¨æµç¨‹å¦‚ä¸‹ï¼š

1. yt-dlp ä½¿ç”¨ä»¥ä¸‹åƒæ•¸èª¿ç”¨ FFmpegï¼š
    
    ```python
    ytdlp_cmd = [
        "yt-dlp", 
        "--extract-audio",  # åƒ…æå–éŸ³è¨Š
        "--audio-format", "wav",  # è½‰æ›ç‚º WAV æ ¼å¼
        "--audio-quality", "0",  # ä½¿ç”¨æœ€é«˜éŸ³è³ª
        "--output", output_path,
        url
    ]
    ```
    
2. FFmpeg åœ¨èƒŒå¾Œå®Œæˆä»¥ä¸‹å·¥ä½œï¼š
    
    * å°‡ä¸‹è¼‰çš„éŸ³è¨Šè½‰æ›ç‚º WAV æ ¼å¼
        
    * ç¢ºä¿éŸ³è¨Šå“è³ªé©åˆèªéŸ³è­˜åˆ¥
        
    * å°‡çµæœå„²å­˜åˆ°æŒ‡å®šè·¯å¾‘
        

é€™ç¨®æ•´åˆä½¿å¾—æˆ‘å€‘çš„å·¥å…·èƒ½å¤ é«˜æ•ˆç‡åœ°è™•ç† YouTube å½±ç‰‡ï¼Œå¾ä¸­æå–é«˜å“è³ªçš„éŸ³è¨Šä¾› Whisper æ¨¡å‹é€²è¡Œè™•ç†ï¼Œæœ€çµ‚ç”Ÿæˆç²¾ç¢ºçš„å­—å¹•ã€‚

## OpenAI Whisper

Whisper æ˜¯ä¸€å€‹é€šç”¨çš„èªéŸ³è­˜åˆ¥æ¨¡å‹ï¼Œç”± OpenAI é–‹ç™¼ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹é»ï¼š

1. **å¤šèªè¨€æ”¯æ´**: æ”¯æ´å¤šç¨®èªè¨€çš„èªéŸ³è­˜åˆ¥ï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€è‹±æ–‡ç­‰
    
2. **é«˜æº–ç¢ºåº¦**: åœ¨å¤šç¨®èªéŸ³ç’°å¢ƒä¸‹éƒ½èƒ½ä¿æŒè¼ƒé«˜çš„è­˜åˆ¥æº–ç¢ºåº¦
    
3. **é–‹æºå¯ç”¨**: å¯ä»¥æœ¬åœ°é‹è¡Œï¼Œç„¡éœ€ä¾è³´é›²ç«¯ API
    
4. **è¦æ¨¡å¯èª¿**: æä¾›å¾ tiny åˆ° large å¤šç¨®æ¨¡å‹è¦æ¨¡ï¼Œå¯æ ¹æ“šéœ€æ±‚é¸æ“‡
    

Whisper æ¨¡å‹è¦æ¨¡æ¯”è¼ƒï¼š

| æ¨¡å‹è¦æ¨¡ | åƒæ•¸å¤§å° | è¨ˆç®—éœ€æ±‚ | é©ç”¨å ´æ™¯ | è¨˜æ†¶é«”éœ€æ±‚ | è™•ç†é€Ÿåº¦ |
| --- | --- | --- | --- | --- | --- |
| **tiny** | 39M | å¾ˆä½ | è³‡æºå—é™ç’°å¢ƒã€å¿«é€Ÿè™•ç† | ~1GB | æœ€å¿« |
| **base** | 74M | ä½ | ä¸€èˆ¬ç”¨é€”ã€åŸºæœ¬æ‡‰ç”¨ | ~1GB | è¼ƒå¿« |
| **small** | 244M | ä¸­ç­‰ | è¼ƒé«˜æº–ç¢ºåº¦éœ€æ±‚ | ~2GB | ä¸­ç­‰ |
| **medium** | 769M | é«˜ | é«˜æº–ç¢ºåº¦éœ€æ±‚ã€å°ˆæ¥­æ‡‰ç”¨ | ~5GB | è¼ƒæ…¢ |
| **large** | 1.5B | å¾ˆé«˜ | å°ˆæ¥­è½‰éŒ„ã€ç ”ç©¶ç”¨é€” | ~10GB | æœ€æ…¢ |

é¸æ“‡åˆé©çš„æ¨¡å‹è¦æ¨¡éœ€è€ƒæ…®æ‚¨çš„ç¡¬é«”è³‡æºã€æº–ç¢ºåº¦éœ€æ±‚å’Œè™•ç†æ™‚é–“è¦æ±‚ã€‚åœ¨è³‡æºå—é™çš„ç’°å¢ƒï¼ˆå¦‚ç­†è¨˜å‹é›»è…¦ç„¡ GPUï¼‰ä¸­ï¼Œå»ºè­°ä½¿ç”¨ tiny æˆ– base æ¨¡å‹ï¼›è€Œå°æ–¼éœ€è¦é«˜æº–ç¢ºåº¦çš„å°ˆæ¥­æ‡‰ç”¨ï¼Œå‰‡å¯è€ƒæ…®ä½¿ç”¨ medium æˆ– large æ¨¡å‹ã€‚

é€™è£¡ä½¿ç”¨äº† Whisper çš„ "tiny" æ¨¡å‹ï¼Œå®ƒåœ¨ä¿æŒè¼ƒå¥½æº–ç¢ºåº¦çš„åŒæ™‚ï¼Œå…·æœ‰æ›´å¿«çš„è™•ç†é€Ÿåº¦å’Œæ›´ä½çš„è³‡æºéœ€æ±‚ã€‚å¦‚æœéœ€è¦æ›´é«˜çš„æº–ç¢ºåº¦ï¼Œå¯ä»¥è€ƒæ…®ä½¿ç”¨æ›´å¤§çš„æ¨¡å‹ï¼Œå¦‚ "small"ã€"medium" æˆ– "large"ã€‚

## PyTorch èˆ‡ CUDA åŠ é€Ÿ

PyTorch æ˜¯ä¸€å€‹é–‹æºçš„æ·±åº¦å­¸ç¿’æ¡†æ¶ï¼Œè€Œ CUDA æ˜¯ NVIDIA æ¨å‡ºçš„ä¸¦è¡Œè¨ˆç®—å¹³å°å’Œç·¨ç¨‹æ¨¡å‹ã€‚

1. **GPU åŠ é€Ÿ**: ä½¿ç”¨ CUDA å•Ÿç”¨ GPU åŠ é€Ÿï¼Œå¤§å¹…æé«˜è™•ç†é€Ÿåº¦
    
2. **è‡ªå‹•æª¢æ¸¬**: ç¨‹å¼æœƒè‡ªå‹•æª¢æ¸¬æ˜¯å¦æœ‰å¯ç”¨çš„ GPUï¼Œå¦‚æœæœ‰å‰‡ä½¿ç”¨ CUDAï¼Œå¦å‰‡æœƒé€€åˆ° CPU
    
3. **ç‰ˆæœ¬å°æ‡‰**: åœ¨å®‰è£æ™‚éœ€è¦ç¢ºä¿ PyTorch å’Œ CUDA çš„ç‰ˆæœ¬ç›¸äº’å…¼å®¹
    

---

# åƒè€ƒè³‡æ–™

1. [Model Context Protocol å¿«é€Ÿå…¥é–€æŒ‡å—](https://modelcontextprotocol.io/quickstart/server)
    
2. [OpenAI Whisper GitHub å„²å­˜åº«](https://github.com/openai/whisper)
    
3. [yt-dlp GitHub å„²å­˜åº«](https://github.com/yt-dlp/yt-dlp)
    
4. [**FFmpeg GitHub å„²å­˜åº«**](https://github.com/FFmpeg/FFmpeg)